<!DOCTYPE html>
<html>
  <head>
    <title>这是登录页面</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    
    <div class="login-box">
      <h2>登录一下</h2>
      <form action="" id="form">

        用户名： <input type="text" id="name" placeholder="用户名" >
        <br />
        <br />
        密  码： <input type="password" id="password" placeholder="密码" >
        <br />
        <br />
        <button id="login">登录</button>
        <button id="register">注册</button>
      </form>
    </div>

    <script src="/javascripts/jquery.min.js"></script>
    <script>
      $(function(){

        $('#login').click(function(e){
          e.preventDefault();
          $.ajax({
            url: '/dologin',
            type: 'GET',
            data: {name: $('#name').val().trim(), password: $('#password').val()}
          }).done(function(res){
            if(res.state){
              window.location.href = '/'
            }else{
              alert('用户名密码错误')
            }
          })
        })

        $('#register').click(function(e){
          e.preventDefault();
          $.ajax({
            url: '/doregister',
            type: 'GET',
            data: {name: $('#name').val().trim(), password: $('#password').val()}
          }).done(function(res){
            if(res.state){
              $('#register').hide();
            }
          })
        })

      })
    </script>
  </body>
</html>
